<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비동기함수Ex</title>
</head>
<body>
  <h1 class="title">현재 날짜와 시간</h1>
  <!-- 
    재귀 함수 :
      함수 내부에서 자기 자신을 호출하는 함수
      재귀 함수 사용시 종료 조건을 설정하지 않으면 무한 호출 됨
      내부적으로 호출 스택call stack을 사용하기 때문에 호출시 스택이 쌓이게 되고 각 호출이 종료되면 스택에서 제거됨. 따라서 메모리 사용이 많음

    즉시실행 함수:
      호출하지 않고 자바스크립트 엔진이 읽으면 바로 실행
        (function 함수명 () {})();  
        (function 함수명 () {} ());  

  -->
  <script>
    (function time(){
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth() + 1;
      const date = now.getDate();
      let day = ['일','월','화','수','목','금','토'];
      day = day[now.getDay()];

      
      let hour = now.getHours(); // 0 ~ 23
      
      
     /* if(hour>=12){
          ampm = '오후';
      }else {
          ampm = '오전';
      }
        */
      
      const ampm = hour >= 12 ? '오후' :  '오전';
      hour = hour % 12; // 오후시간 반환
      hour = hour ? hour : 12; // if(hour) hour  else 12 오후 12시면 hour % 12 는 0 이여서 if 조건문의 hour에 0이 들어가서 false라서 else문이 작동 되서 12가 나온다.
      /*if(hour<10){// 두자리수로 나오게끔 01시 02시
        hr = '0' + hr;
      } else {
        hr
      }
*/
      hour = hour < 10 ? '0' + hour : hour;
      const min = now.getMinutes().toString().padStart(2,'0');//padStart(문자열길이, '채워넣을 문자')
      const sec = now.getSeconds().toString().padStart(2,'0');



      const output = `${year}년 ${month}월 ${date}일 ${day}요일 ${ampm} ${hour}:${min}:${sec}`;
      document.querySelector('.title').innerText = output;

      setTimeout(time, 1000);//재귀함수
    })();//즉시실행함수
   
    
    //setInterval(time,1000);
  </script>
</body>
</html>